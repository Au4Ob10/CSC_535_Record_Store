<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Record Store</title>
    <style>
      .flash-message.error {
              color: white; /* White text for better contrast */
              background-color: #FF6347; /* Tomato red background */
              padding: 10px; /* Add some padding for better spacing */
              border-radius: 5px; /* Add rounded corners for style */
          }
          
          .flash-message.info {
              color: white; /* White text for better contrast */
              background-color: #32CD32; /* Lime green background */
              padding: 10px; /* Add some padding for better spacing */
              border-radius: 5px; /* Add rounded corners for style */
          }
          #record_cart_page_img {
                object-fit: contain; /* or "cover" depending on your preference */
                max-width: 100%; /* Ensure the image doesn't exceed its container's width */
                max-height: 100%; /* Ensure the image doesn't exceed its container's height */
            }
  </style>
  
  
    <!-- Flash messages section -->
    {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
              <ul class="flash-messages">
                  {% for category, message in messages %}
                      <li class="flash-message {{ category }}">{{ message }}</li>
                  {% endfor %}
              </ul>
          {% endif %}
      {% endwith %}
</head>
<div class="container-fluid">
    <div class="row">
      <div class="col bg-primary">
    <p class="h3" id="companyNameHeading">Alpha Records</p>
   
  </div>
  <div class="col bg-primary d-flex justify-content-end">
    <button type="button" class="btn btn-primary">About Us</button>
    <button type="button" class="btn btn-primary ml-2">Our Locations</button>
  </div>
  </div>
</div>


  
    <div class="container-fluid">
      <div class="row mt-3 mb-4 d-flex justify-content-between align-items-center">
        <div class="col-4 align-items-center">
          <p class="h4">Welcome! {{ current_user }}</p>
      </div>
        <button type="button" class="btn btn-primary" onclick="window.location.href='{{ url_for('user.home') }}';">
        Home
        </button>
        <button type="button" class="btn btn-primary" onclick="window.location.href='{{ url_for('user.profile') }}';">
            Profile
        </button>
        <button type="button" class="btn btn-primary" onclick="window.location.href='{{ url_for('auth1.logout') }}';">
          Log Out
        </button>
        <button type="button" class="btn bg-primary ml-5 mr-3" id="viewCart" onclick="window.location.href='{{ url_for( 'user.cart') }}';"  >
          <i class="fa fa-shopping-cart mr-2" aria-hidden="true"></i><span class="badge badge-primary" id="quantityBadge">{{ cart_item_count }}</span>
          
        </button>
      

      </div>
    </div>
    <body>
        <div class="container-fluid">
            <div class="row justify-content-center">
                {% for record in record_data %}
                <div class="col-lg-6 col-xl-4">
                    <!-- Card -->
                    <div class="card mb-4">
                        <!-- Image -->
                        <div class="d-flex justify-content-center">
                            <img id="record_cart_page_img" src="{{ record[4] }}" class="card-img-top" style="height: 300px; object-fit: cover;">
                        </div>
                        <!-- Add to Cart Form -->
                        <div class="card-body">
                            <form method="post" action="/user/add_to_cart">
                                <input type="hidden" name="record_id" value="{{ record[0] }}">
                                <input type="hidden" name="price" value="{{ record[4] }}">
                                <button type="submit" class="btn btn-danger">Add to Cart</button>
                            </form>
                        </div>
                    </div>
                    <!-- Text -->
                    <table class="table table-bordered">
                        <tbody>
                            <tr>
                                <td>Record Name:</td>
                                <td>{{ record[1] }}</td>
                            </tr>
                            <tr>
                                <td>Artist:</td>
                                <td>{{ record[2] }}</td>
                            </tr>
                            <tr>
                                <td>Genre:</td>
                                <td>{{ record[3] }}</td>
                            </tr>
                            <tr>
                                <td>Price:</td>
                                <td>${{ record[5] }}</td>
                            </tr>
                            <tr>
                                <td>Stock:</td>
                                <td>{{ record[6] }}</td>
                            </tr>
                        </tbody>
                    </table>
                    <!-- Review Form -->
                    <form class="d-flex" action="/user/review_record" method="POST">
                        <div class="input-group">
                            <input class="form-control" type="review" name="review" placeholder="Leave a Review!" aria-label="Review">
                            <input type="hidden" name="id" value="{{ record[0] }}">
                            <button class="btn btn-outline-primary" type="submit">Submit Review</button>
                        </div>
                    </form>
                </div>
                {% endfor %}
            </div>
        </div>
        <div class="container-fluid">
            {% for review in review_data %}
            <div class="card mb-3">
                <!-- Reviewer's Name -->
                <div class="card-header">
                    {{ review[1] }}
                </div>
                <!-- Review -->
                <div class="card-body">
                    <p class="card-text">{{ review[4] }}</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </body>